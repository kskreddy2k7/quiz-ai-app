#:import dp kivy.metrics.dp

<PrimaryLabel@Label>:
    color: 0.1, 0.1, 0.15, 1
    font_size: "18sp"
    text_size: self.width, None
    halign: "center"
    valign: "middle"

<PrimaryButton@Button>:
    background_normal: ""
    background_color: 0.2, 0.5, 0.9, 1
    color: 1, 1, 1, 1
    font_size: "16sp"
    size_hint_y: None
    height: dp(48)

<ScreenManager>:
    SplashScreen:
        name: "splash"
    HomeScreen:
        name: "home"
    QuizScreen:
        name: "quiz"
    ResultsScreen:
        name: "results"
    MaterialsScreen:
        name: "materials"

<SplashScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: dp(24)
        spacing: dp(20)
        canvas.before:
            Color:
                rgba: 0.92, 0.95, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Widget:
        Label:
            text: "Quiz AI"
            font_size: "32sp"
            bold: True
            color: 0.1, 0.2, 0.4, 1
        Label:
            text: "Believe in yourself. Small steps every day lead to big success."
            font_size: "18sp"
            color: 0.2, 0.2, 0.3, 1
            text_size: self.width, None
            halign: "center"
        Label:
            text: "Created with motivation by\nKata Sai Kranthu Reddy"
            font_size: "16sp"
            color: 0.25, 0.25, 0.35, 1
            text_size: self.width, None
            halign: "center"
        Widget:
        PrimaryButton:
            text: "Get Started"
            on_release:
                app.root.current = "home"
        Widget:

<HomeScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(16)
        canvas.before:
            Color:
                rgba: 0.98, 0.98, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: "Welcome, Learner!"
            font_size: "26sp"
            bold: True
            color: 0.15, 0.2, 0.35, 1
        PrimaryLabel:
            text: root.daily_quote
        BoxLayout:
            orientation: "vertical"
            spacing: dp(12)
            size_hint_y: None
            height: self.minimum_height
            PrimaryButton:
                text: "Start Practice Quiz"
                on_release:
                    app.restart_quiz()
            PrimaryButton:
                text: "Generate New Quiz"
                on_release:
                    app.generate_quiz()
                    app.root.current = "quiz"
            PrimaryButton:
                text: "Study Materials"
                on_release:
                    app.root.current = "materials"
        Widget:
        PrimaryButton:
            text: "Exit"
            background_color: 0.5, 0.5, 0.5, 1
            on_release: app.stop()

<QuizScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(16)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: root.progress_text
            font_size: "16sp"
            color: 0.3, 0.3, 0.4, 1
        Label:
            text: root.question_text
            font_size: "22sp"
            bold: True
            color: 0.15, 0.2, 0.35, 1
            text_size: self.width, None
            halign: "center"
        GridLayout:
            cols: 1
            spacing: dp(12)
            size_hint_y: None
            height: self.minimum_height
            PrimaryButton:
                text: root.option_texts[0] if len(root.option_texts) > 0 else ""
                on_release: app.submit_answer(self.text)
            PrimaryButton:
                text: root.option_texts[1] if len(root.option_texts) > 1 else ""
                on_release: app.submit_answer(self.text)
            PrimaryButton:
                text: root.option_texts[2] if len(root.option_texts) > 2 else ""
                on_release: app.submit_answer(self.text)
            PrimaryButton:
                text: root.option_texts[3] if len(root.option_texts) > 3 else ""
                on_release: app.submit_answer(self.text)
        Widget:
        PrimaryButton:
            text: "Back to Home"
            background_color: 0.5, 0.6, 0.7, 1
            on_release: app.go_home()

<ResultsScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: dp(24)
        spacing: dp(20)
        canvas.before:
            Color:
                rgba: 0.95, 0.98, 0.97, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: "Quiz Complete!"
            font_size: "26sp"
            bold: True
            color: 0.1, 0.4, 0.3, 1
        PrimaryLabel:
            text: root.score_text
        PrimaryLabel:
            text: root.encouragement_text
        BoxLayout:
            orientation: "vertical"
            spacing: dp(12)
            size_hint_y: None
            height: self.minimum_height
            PrimaryButton:
                text: "Try Another Quiz"
                on_release: app.restart_quiz()
            PrimaryButton:
                text: "Back to Home"
                background_color: 0.4, 0.6, 0.5, 1
                on_release: app.go_home()

<MaterialsScreen>:
    on_pre_enter: app.request_storage_permissions()
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(16)
        canvas.before:
            Color:
                rgba: 0.97, 0.96, 0.99, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text: "Study Materials"
            font_size: "24sp"
            bold: True
            color: 0.2, 0.2, 0.4, 1
        PrimaryLabel:
            text: "Keep your notes and files handy. You can store PDFs, PPTs, or DOCs in your device and open them when needed."
        BoxLayout:
            orientation: "vertical"
            spacing: dp(10)
            size_hint_y: None
            height: self.minimum_height
            PrimaryButton:
                text: "PDF Guides (offline ready)"
                background_color: 0.4, 0.5, 0.8, 1
            PrimaryButton:
                text: "PPT Summaries"
                background_color: 0.4, 0.5, 0.8, 1
            PrimaryButton:
                text: "DOC Notes"
                background_color: 0.4, 0.5, 0.8, 1
        Widget:
        PrimaryButton:
            text: "Back to Home"
            background_color: 0.5, 0.6, 0.7, 1
            on_release: app.go_home()
