#:import Theme app.ui.theme.Theme

<GlassCard@BoxLayout>:
    orientation: "vertical"
    padding: Theme.PADDING_STD
    spacing: "8dp"
    canvas.before:
        # Glass Background (Translucent)
        Color:
            rgba: Theme.color(Theme.BG_CARD, 0.6)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(20)]
        
        # Subtle Border / Rim Light
        Color:
            rgba: 1, 1, 1, 0.08
        Line:
            rounded_rectangle: [self.x, self.y, self.width, self.height, dp(20)]
            width: dp(1)

<NeonButton@Button>:
    background_normal: ""
    background_down: ""
    background_color: 0, 0, 0, 0
    font_size: "16sp"
    bold: True
    color: Theme.color(Theme.BG_DARK) # Text color contrast
    
    canvas.before:
        # Glow Effect (Behind)
        Color:
            rgba: Theme.color(Theme.PRIMARY, 0.4)
        RoundedRectangle:
            pos: self.x - dp(4), self.y - dp(4)
            size: self.width + dp(8), self.height + dp(8)
            radius: [dp(24)]
            
        # Main Button Body
        Color:
            rgba: Theme.color(Theme.PRIMARY) if self.state == 'normal' else Theme.color(Theme.PRIMARY_LIGHT)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(20)]

<GhostButton@Button>:
    background_normal: ""
    background_color: 0, 0, 0, 0
    color: Theme.color(Theme.TEXT_PRIMARY)
    canvas.before:
        Color:
            rgba: Theme.color(Theme.BG_CARD)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(12)]
        Color:
            rgba: Theme.color(Theme.PRIMARY, 0.5)
        Line:
            rounded_rectangle: [self.x, self.y, self.width, self.height, dp(12)]
            width: dp(1)

<AnimatedInput@TextInput>:
    background_normal: ""
    background_active: ""
    background_color: 0, 0, 0, 0
    foreground_color: Theme.color(Theme.TEXT_PRIMARY)
    cursor_color: Theme.color(Theme.PRIMARY)
    padding: "16dp"
    canvas.before:
        Color:
            rgba: Theme.color(Theme.BG_CARD, 0.5)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(12)]
        # Bottom Line Accent
        Color:
            rgba: Theme.color(Theme.PRIMARY) if self.focus else [1, 1, 1, 0.1]
        Line:
            points: [self.x, self.y, self.x + self.width, self.y]
            width: dp(2) if self.focus else dp(1)
