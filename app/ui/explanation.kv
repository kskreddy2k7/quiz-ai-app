<ExplanationScreen>:
    canvas.before:
        Color:
            rgba: 0.05, 0.07, 0.12, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        padding: "20dp"
        spacing: "12dp"
        BoxLayout:
            size_hint_y: None
            height: "40dp"
            Button:
                text: "← Quit"
                size_hint_x: None
                width: "90dp"
                background_normal: ""
                background_color: 0.16, 0.22, 0.3, 1
                on_release: app.go_home()
            Label:
                text: "Answer Insight"
                color: 0.7, 0.9, 1, 1
                bold: True
        Label:
            text: root.result_text
            font_size: "20sp"
            color: (0.6, 1, 0.7, 1) if root.result_text.startswith("✅") else (1, 0.6, 0.6, 1)
            size_hint_y: None
            height: self.texture_size[1]
        Label:
            text: root.explanation_text
            font_size: "13sp"
            color: 0.8, 0.85, 0.95, 0.9
            size_hint_y: None
            height: self.texture_size[1]
        Label:
            text: "Your answer: " + root.selected_answer
            font_size: "13sp"
            color: 0.8, 0.85, 0.95, 0.9
            size_hint_y: None
            height: self.texture_size[1]
        Label:
            text: "Correct answer: " + root.correct_answer
            font_size: "13sp"
            color: 0.7, 0.9, 1, 1
            size_hint_y: None
            height: self.texture_size[1]
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: "vertical"
                spacing: "8dp"
                size_hint_y: None
                height: self.minimum_height
                Label:
                    text: "Why this answer is correct"
                    font_size: "14sp"
                    bold: True
                    color: 0.6, 0.9, 1, 1
                    size_hint_y: None
                    height: self.texture_size[1]
                Label:
                    text: root.correct_explanation
                    font_size: "14sp"
                    color: 0.85, 0.9, 1, 0.9
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]
                Label:
                    text: "Why other options are wrong"
                    font_size: "14sp"
                    bold: True
                    color: 1, 0.8, 0.7, 1
                    size_hint_y: None
                    height: self.texture_size[1]
                Label:
                    text: root.wrong_explanations_text
                    font_size: "13sp"
                    color: 0.85, 0.9, 1, 0.9
                    text_size: self.width, None
                    size_hint_y: None
                    height: self.texture_size[1]
        Button:
            text: root.next_label
            size_hint_y: None
            height: "52dp"
            background_normal: ""
            background_color: 0.35, 0.55, 0.9, 1
            on_release: app.next_question() if root.next_label == "Next" else app.show_results()
