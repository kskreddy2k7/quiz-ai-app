<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S Quiz - AI Learning Platform</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="apple-touch-icon" href="/static/icon-192.png">
    <!-- Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6366f1">
    <!-- CSS -->
    <link rel="stylesheet" href="/static/style.css?v=7">
</head>

<body>

    <!-- Onboarding Modal (Shown Once) -->
    <div id="onboarding-modal" class="modal-overlay" style="display: none;">
        <div class="modal-premium-card onboarding-card">
            <div class="onboarding-steps">
                <!-- Step 1: Welcome -->
                <div class="onboarding-step active" data-step="1">
                    <div class="onboarding-icon"><i class="bi bi-mortarboard-fill"></i></div>
                    <h2>Welcome to S Quiz</h2>
                    <p>Your premium AI learning assistant. Master any topic with ease.</p>
                </div>
                <!-- Step 2: Features -->
                <div class="onboarding-step" data-step="2">
                    <div class="onboarding-icon"><i class="bi bi-lightning-charge-fill"></i></div>
                    <h2>AI Power</h2>
                    <p>Generate quizzes from topics or upload your own PDFs for personalized practice.</p>
                </div>
                <!-- Step 3: Languages & Tutor -->
                <div class="onboarding-step" data-step="3">
                    <div class="onboarding-icon"><i class="bi bi-translate"></i></div>
                    <h2>Learn in Any Language</h2>
                    <p>Support for 12+ Indian languages and a 24/7 AI Tutor to help you learn better.</p>
                </div>
            </div>
            <div class="onboarding-controls">
                <div class="onboarding-dots">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
                <button class="btn btn-primary-glow" onclick="app.nextOnboarding()">Next <i
                        class="bi bi-arrow-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Permission Explanation Screen -->
    <div id="permission-modal" class="modal-overlay" style="display: none;">
        <div class="modal-premium-card">
            <div class="icon-header indigo"><i class="bi bi-shield-check"></i></div>
            <h2>Storage & Internet Access</h2>
            <p class="permission-text">S Quiz needs <strong>Storage</strong> access to process your study material and
                <strong>Internet</strong> access to connect with our advanced AI Engine.
            </p>
            <div class="permission-list">
                <div class="permission-item"><i class="bi bi-folder-check"></i> Read PDFs & Study Notes</div>
                <div class="permission-item"><i class="bi bi-wifi"></i> Instant AI Quiz Generation</div>
            </div>
            <button class="btn btn-primary-glow w-100" onclick="app.allowPermissions()">Allow & Continue</button>
        </div>
    </div>

    <!-- Auth View -->
    <div id="auth-view" class="screen auth-screen">
        <div class="auth-header">
            <div class="nav-brand">
                <div class="nav-logo"><i class="bi bi-lightning-charge-fill"></i></div>
                <span>S Quiz</span>
            </div>
            <p class="auth-subtitle">Premium AI Learning for Students</p>
        </div>

        <div class="auth-form-card card-premium">
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="app.switchAuthTab('login')">Login</button>
                <button class="auth-tab" onclick="app.switchAuthTab('signup')">Sign Up</button>
            </div>

            <!-- Login Form -->
            <div id="login-container">
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" id="login-email" class="input-field" placeholder="student@example.com">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="login-password" class="input-field" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button class="btn-toggle-password" onclick="app.togglePassword('login-password', this)">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                </div>
                <button class="btn btn-primary-glow w-100" onclick="app.handleLogin()">Login to Account</button>
            </div>

            <!-- Signup Form -->
            <div id="signup-container" style="display: none;">
                <div class="input-group">
                    <label>Full Name</label>
                    <input type="text" id="signup-name" class="input-field" placeholder="John Doe">
                </div>
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" id="signup-email" class="input-field" placeholder="student@example.com">
                </div>
                <div class="input-group">
                    <label>Create Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="signup-password" class="input-field" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button class="btn-toggle-password" onclick="app.togglePassword('signup-password', this)">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                </div>
                <button class="btn btn-primary-glow w-100" onclick="app.handleSignup()">Create Free Account</button>
            </div>

            <div class="auth-divider"><span>OR</span></div>

            <button class="btn-google w-100" onclick="app.googleLogin()">
                <img src="https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png" width="20">
                Sign in with Google
            </button>

            <button class="btn-guest w-100" onclick="app.guestLogin()">Continue as Guest üë§</button>
        </div>
    </div>

    <!-- Top Navbar (Premium) -->
    <nav class="navbar-compact">
        <div class="nav-brand">
            <div class="nav-logo"><i class="bi bi-lightning-charge-fill"></i></div>
            <span>S Quiz</span>
        </div>

        <div class="nav-user-area" id="auth-nav">
            <div class="user-pill hidden" id="user-pill-container" onclick="app.showProfile()">
                <div class="avatar-nav"><i class="bi bi-person-fill"></i></div>
                <span id="nav-user-display" class="hidden-mobile">Student</span>
            </div>
            <button class="btn-logout hidden" id="btn-logout" onclick="app.logout()">
                <i class="bi bi-box-arrow-right"></i>
            </button>
        </div>
    </nav>

    <div id="app-container" style="display: none; width: 100%;">

        <main class="content-wrapper">
            <!-- Hero Section (Compact) -->
            <section class="hero-compact">
                <h1 class="hero-title">S Quiz</h1>
                <p class="hero-tagline">Master any topic with AI-powered quizzes.</p>

                <div class="hero-actions">
                    <button class="btn-primary-small" onclick="app.showTopic()">Start Learning</button>
                    <div id="guest-notice" class="guest-badge hidden">
                        <i class="bi bi-info-circle"></i> Guest Mode (Limited)
                    </div>
                </div>
            </section>

            <!-- Quick Navigation / Feature Buttons -->
            <div class="feature-grid-compact">
                <button class="feature-button active" id="btn-topic" onclick="app.showTopic()">
                    <i class="bi bi-lightning-fill"></i>
                    <span>TOPIC</span>
                </button>
                <button class="feature-button" id="btn-upload" onclick="app.showUpload()">
                    <i class="bi bi-cloud-arrow-up-fill"></i>
                    <span>UPLOAD</span>
                </button>
                <button class="feature-button" id="btn-notes" onclick="app.showNotes()">
                    <i class="bi bi-journal-text"></i>
                    <span>NOTE</span>
                </button>
                <button class="feature-button" id="btn-tutor" onclick="app.showTutor()">
                    <i class="bi bi-chat-dots-fill"></i>
                    <span>TUTOR</span>
                </button>
            </div>

            <!-- Views -->
            <div id="view-container" class="view-container">

                <!-- 1. Topic Quiz View -->
                <div id="topic-view" class="screen">
                    <div class="card-premium topic-card">
                        <h2 class="section-title"><i class="bi bi-file-earmark-text"></i> Generate Quiz from Topic</h2>

                        <div class="input-group">
                            <label><i class="bi bi-bullseye"></i> Enter Topic</label>
                            <input type="text" id="topic-input" class="input-field"
                                placeholder="e.g., Photosynthesis, Indian History, Python Programming">
                        </div>

                        <div class="quiz-config-grid">
                            <div class="config-item">
                                <label><i class="bi bi-list-ol"></i> Questions</label>
                                <input type="number" id="q-count" class="input-field" value="5" min="3" max="20">
                            </div>
                            <div class="config-item">
                                <label><i class="bi bi-graph-up"></i> Difficulty</label>
                                <select id="difficulty-select" class="input-field">
                                    <option value="Easy">Easy</option>
                                    <option value="Medium" selected>Medium</option>
                                    <option value="Hard">Hard</option>
                                </select>
                            </div>
                            <div class="config-item">
                                <label><i class="bi bi-translate"></i> Language</label>
                                <select id="language-select" class="input-field">
                                    <option value="English">English</option>
                                    <option value="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                                    <option value="Telugu">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                                    <option value="Tamil">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                                    <option value="Kannada">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                                    <option value="Malayalam">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                                    <option value="Marathi">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                                    <option value="Gujarati">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                                    <option value="Punjabi">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                                    <option value="Bengali">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                                    <option value="Odia">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
                                    <option value="Urdu">ÿßÿ±ÿØŸà (Urdu)</option>
                                </select>
                            </div>
                        </div>

                        <button class="btn btn-primary-glow w-100" onclick="app.generateTopicQuiz()">
                            Generate Quiz üöÄ
                        </button>
                    </div>
                </div>

                <!-- 2. Upload View -->
                <div id="upload-view" class="screen" style="display: none;">
                    <div class="card-premium">
                        <h2 class="section-title"><i class="bi bi-cloud-arrow-up"></i> Upload Study Material</h2>
                        <div class="upload-area" onclick="document.getElementById('file-upload').click()">
                            <div class="onboarding-icon indigo"><i class="bi bi-file-earmark-pdf"></i></div>
                            <h3>Drop your PDF or Text file here</h3>
                            <p id="file-label-text">Tap to browse files</p>
                            <input type="file" id="file-upload" hidden onchange="app.handleFileSelect(this)">
                        </div>

                        <div class="quiz-config-grid" style="margin-top: 20px;">
                            <div class="config-item">
                                <label>Questions</label>
                                <input type="number" id="file-q-count" class="input-field" value="10">
                            </div>
                            <div class="config-item">
                                <label>Difficulty</label>
                                <select id="file-difficulty-select" class="input-field">
                                    <option value="Easy">Easy</option>
                                    <option value="Medium" selected>Medium</option>
                                    <option value="Hard">Hard</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Language</label>
                            <select id="file-language-select" class="input-field">
                                <option value="English">English</option>
                                <option value="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                                <option value="Telugu">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                                <option value="Tamil">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                                <option value="Kannada">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                                <option value="Malayalam">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                                <option value="Marathi">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                                <option value="Gujarati">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                                <option value="Punjabi">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                                <option value="Bengali">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                                <option value="Odia">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
                                <option value="Urdu">ÿßÿ±ÿØŸà (Urdu)</option>
                            </select>
                        </div>

                        <button class="btn btn-primary-glow w-100" onclick="app.generateFileQuiz()">Generate Quiz from
                            File üìÇ</button>
                    </div>
                </div>

                <!-- 3. Smart Notes View -->
                <div id="presentation-view" class="screen" style="display: none;">
                    <div class="card-premium">
                        <h2 class="section-title"><i class="bi bi-journal-text"></i> Smart Notes Creator</h2>
                        <p style="text-align: center; color: var(--text-muted); margin-bottom: 25px;">Turn any topic
                            into a professional study guide.</p>

                        <div class="input-group">
                            <label>Topic</label>
                            <input type="text" id="ppt-topic" class="input-field" placeholder="e.g. Photosynthesis">
                        </div>

                        <div class="quiz-config-grid">
                            <div class="config-item">
                                <label>Format</label>
                                <select id="ppt-format" class="input-field">
                                    <option value="pdf" selected>üìÑ PDF Guide</option>
                                    <option value="docx">üìù Word Doc</option>
                                    <option value="pptx">üìä Slides (PPTX)</option>
                                </select>
                            </div>
                            <div class="config-item">
                                <label>Style</label>
                                <select id="ppt-font" class="input-field">
                                    <option value="Modern">Modern Sans</option>
                                    <option value="Classic">Classic Serif</option>
                                </select>
                            </div>
                        </div>
                        <input type="hidden" id="ppt-slides" value="10">

                        <button class="btn btn-primary-glow w-100" onclick="app.generateNotes()">Create Notes ‚ú®</button>
                    </div>
                </div>

                <!-- 4. Tutor View -->
                <div id="tutor-view" class="screen" style="display: none;">
                    <div class="card-premium"
                        style="padding: 0; overflow: hidden; height: 70vh; display: flex; flex-direction: column;">
                        <div style="padding: 20px; border-bottom: 1px solid var(--border-color); background: #fafafa;">
                            <h3 style="margin: 0; font-size: 1.1rem; font-weight: 700;"><i
                                    class="bi bi-robot indigo-icon"></i> AI Tutor</h3>
                        </div>

                        <div id="tutor-history"
                            style="flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px;">
                            <div class="msg msg-bot">Hello! I'm your AI tutor. Ask me anything about your studies! üëã
                            </div>
                        </div>

                        <div
                            style="padding: 20px; border-top: 1px solid var(--border-color); display: flex; gap: 12px; background: white;">
                            <input type="text" id="tutor-input" class="input-field" style="margin: 0;"
                                placeholder="Ask a question..."
                                onkeypress="if(event.key==='Enter') app.sendTutorMessage()">
                            <button class="btn btn-primary-glow" style="width: auto; padding: 0 25px;"
                                onclick="app.sendTutorMessage()">
                                <i class="bi bi-send-fill"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 5. Quiz Taking View -->
                <div id="quiz-view" class="screen" style="display: none;">
                    <div class="card-premium">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <span style="font-weight: 700; color: var(--primary); font-size: 0.9rem;"
                                id="quiz-topic-display">TOPIC</span>
                            <div class="badge-premium">Question <span id="current-q">1</span> / <span
                                    id="total-q">5</span></div>
                        </div>

                        <h3 id="question-text"
                            style="font-size: 1.25rem; font-weight: 700; margin-bottom: 30px; line-height: 1.5; color: var(--text-main);">
                            Question goes here?</h3>

                        <div id="options-container" style="display: grid; gap: 12px; margin-bottom: 30px;">
                            <!-- Options injected by JS -->
                        </div>

                        <!-- Explanation -->
                        <div id="explanation-box" class="explanation-card" style="display:none;">
                            <h4 style="margin-bottom: 10px; color: var(--primary);"><i class="bi bi-lightbulb-fill"></i>
                                Explanation</h4>
                            <p id="explanation-text" style="font-size: 0.95rem; line-height: 1.6;"></p>
                        </div>

                        <button class="btn btn-primary-glow w-100" id="btn-next-question"
                            onclick="app.nextQuestion()">Next Question <i class="bi bi-arrow-right"></i></button>
                    </div>
                </div>

                <!-- 6. Result View -->
                <div id="result-view" class="screen" style="display: none;">
                    <div class="card-premium" style="text-align: center;">
                        <div class="onboarding-icon" style="background: #fff8e1; color: #ffc107; margin: 0 auto 20px;">
                            <i class="bi bi-trophy-fill"></i>
                        </div>
                        <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: 5px;">Quiz Complete!</h2>
                        <p class="text-muted" style="margin-bottom: 20px;">Excellent progress, Student!</p>

                        <div class="badge-premium"
                            style="display: inline-block; padding: 10px 20px; font-size: 1.1rem; margin-bottom: 30px;">
                            Score: <span id="final-score" style="font-weight: 800;">90%</span>
                        </div>

                        <!-- Motivational Quote -->
                        <div class="explanation-card"
                            style="display: block; background: #f5f3ff; border-left: 4px solid var(--primary); text-align: left; margin: 0 auto 30px;">
                            <i class="bi bi-quote" style="font-size: 1.5rem; color: var(--primary); opacity: 0.5;"></i>
                            <p id="result-quote-text"
                                style="font-style: italic; font-weight: 500; font-size: 1rem; color: var(--text-main); margin-bottom: 10px;">
                            </p>
                            <span id="result-quote-author"
                                style="font-size: 0.85rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase;"></span>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: center;">
                            <button class="btn btn-primary-glow" onclick="app.showTopic()" style="flex: 1;">New Quiz
                                ‚Ü∫</button>
                            <button class="btn btn-outline-small" onclick="app.shareQuiz()" style="width: 60px;"><i
                                    class="bi bi-share"></i></button>
                        </div>
                    </div>
                </div>

                <!-- 7. Profile View (BYJU'S style) -->
                <div id="profile-view" class="screen" style="display: none;">
                    <div class="card-premium profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar"><i class="bi bi-person"></i></div>
                            <h2 id="profile-name-display">Student Name</h2>
                            <p id="profile-email-display">student@example.com</p>
                        </div>

                        <div class="profile-form">
                            <div class="input-group">
                                <label><i class="bi bi-person-badge"></i> Full Name</label>
                                <input type="text" id="profile-name-input" class="input-field" placeholder="Your Name">
                            </div>
                            <div class="input-group">
                                <label><i class="bi bi-book"></i> Class / Course</label>
                                <input type="text" id="profile-class-input" class="input-field"
                                    placeholder="e.g. Class 10, JEE, NEET">
                            </div>
                            <div class="input-group">
                                <label><i class="bi bi-translate"></i> Preferred Language</label>
                                <select id="profile-lang-select" class="input-field">
                                    <option value="English">English</option>
                                    <option value="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                                    <option value="Telugu">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                                    <option value="Tamil">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                                    <option value="Kannada">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                                    <option value="Malayalam">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                                    <option value="Marathi">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                                    <option value="Gujarati">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                                    <option value="Punjabi">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                                    <option value="Bengali">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                                    <option value="Odia">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
                                    <option value="Urdu">ÿßÿ±ÿØŸà (Urdu)</option>
                                </select>
                            </div>
                            <button class="btn btn-primary-glow w-100" onclick="app.saveProfile()">Save Profile
                                Changes</button>
                        </div>
                    </div>
                </div>

                <!-- 8. Library List View -->
                <div id="library-view" class="screen" style="display: none;">
                    <div id="library-list"></div>
                </div>

            </div> <!-- End Container -->
    </div> <!-- End App Container -->

    <!-- Duplicate/Legacy structures removed for stability -->
    <script src="/static/translations.js"></script>
    <script src="/static/script.js?v=8"></script>
</body>

</html>